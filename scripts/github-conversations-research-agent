#!/usr/bin/env python3
"""CLI wrapper for github-conversations-research-agent."""
import argparse
import json
import sys


def main():
    parser = argparse.ArgumentParser(prog="github-conversations-research-agent")
    parser.add_argument("request", help="Natural language research request")
    parser.add_argument("--collection", required=True)
    parser.add_argument("--limit", type=int, default=5)
    parser.add_argument("--max-depth", type=int, default=2)
    parser.add_argument("--editor-file", default=None)
    parser.add_argument("--clarifying-qa", default=None)
    parser.add_argument("--search-modes", default=None)
    parser.add_argument("--cache-path", default=None)
    parser.add_argument("--fast-model", default=None)
    parser.add_argument("--reasoning-model", default=None)
    parser.add_argument("--parallel", action="store_true")
    parser.add_argument("--verbose", action="store_true")
    args = parser.parse_args()

    from doppiozero.github_conversations_research_agent import github_conversations_research_agent

    report = github_conversations_research_agent(
        args.request,
        collection=args.collection,
        limit=args.limit,
        max_depth=args.max_depth,
        editor_file=args.editor_file,
        clarifying_qa=args.clarifying_qa,
        search_modes=args.search_modes,
        cache_path=args.cache_path,
        fast_model=args.fast_model,
        reasoning_model=args.reasoning_model,
        parallel=args.parallel,
        verbose=args.verbose,
    )
    print(json.dumps(report, indent=2))


if __name__ == "__main__":
    main()
